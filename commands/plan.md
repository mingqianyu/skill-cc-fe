---
description: 重述需求、评估风险、创建分步实施计划。等待用户确认后才开始写代码。
---

<!--
  【设计理念】
  /plan 命令是开源项目工作流的第一步。

  【Commands vs Agents 的关系】
  - Command = 用户触发的入口（通过 /plan 调用）
  - Agent = 实际执行的专家（planner agent）
  Command 定义"做什么"，Agent 定义"怎么做"。

  【frontmatter 中的 description】
  这是 Claude 用来判断何时建议使用此命令的描述。
  当用户的需求匹配描述时，Claude 会主动建议 /plan。
-->

# /plan 命令

此命令调用 **planner** 代理，在写代码之前创建完整的实施计划。

## 使用时机

- 开始新功能开发
- 进行重大架构变更
- 复杂重构
- 多文件/组件受影响
- 需求不明确或有歧义

## 执行流程

1. **分析需求** - 用清晰的语言重述需求
2. **拆解阶段** - 分解为具体可执行的步骤
3. **识别依赖** - 标出组件间的依赖关系
4. **评估风险** - 标记潜在问题和阻塞点
5. **呈现计划** - 等待用户明确确认

## 关键规则

**必须等待用户确认后才能开始写代码。**

用户可以回复：
- "确认" / "开始" → 按计划执行
- "修改: [具体修改]" → 调整计划
- "换个方案: [替代方案]" → 重新规划

## 与其他命令的配合

规划完成后：
- 用 `/tdd` 按 TDD 方式实现
- 用 `/build-fix` 修复构建错误
- 用 `/code-review` 审查实现
