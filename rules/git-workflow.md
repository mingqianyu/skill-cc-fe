<!--
  【设计理念】
  Git 工作流规则。参考开源项目的 git-workflow.md。

  【核心思想】
  开源项目定义了一个完整的功能开发流程：
  先规划(plan) → TDD开发 → 代码审查 → 提交
  这个流程确保每次提交都是经过验证的高质量代码。

  【约定式提交(Conventional Commits)】
  统一的提交信息格式让 Claude 能：
  1. 自动生成符合规范的 commit message
  2. 理解项目的变更历史
  3. 辅助生成 changelog
-->

# Git 工作流规则

## 提交信息格式

<!--
  约定式提交格式：<type>: <description>
  type 决定了这次提交的性质，便于自动化工具处理。
-->

```
<type>: <简短描述>

<可选的详细说明>
```

### 类型说明

| 类型 | 用途 | 示例 |
|------|------|------|
| `feat` | 新功能 | feat: 添加用户登录功能 |
| `fix` | 修复 Bug | fix: 修复列表分页不生效的问题 |
| `refactor` | 重构（不改变功能） | refactor: 重构用户模块目录结构 |
| `docs` | 文档变更 | docs: 更新 API 接口文档 |
| `test` | 测试相关 | test: 添加用户服务单元测试 |
| `chore` | 构建/工具变更 | chore: 升级 vite 到 6.x |
| `perf` | 性能优化 | perf: 优化列表虚拟滚动性能 |
| `style` | 代码格式（不影响逻辑） | style: 统一缩进为 2 空格 |
| `ci` | CI/CD 配置 | ci: 添加 GitHub Actions 部署流程 |

## 功能开发流程

<!--
  【设计理念】四步工作流
  这是开源项目最核心的开发流程设计。
  每一步都有对应的 agent 来辅助执行。
-->

### 1. 先规划 (Plan First)

- 使用 **planner** 代理创建实施计划
- 识别依赖关系和风险
- 拆解为可执行的阶段

### 2. TDD 开发

- 使用 **tdd-guide** 代理
- 先写测试（RED）
- 实现代码通过测试（GREEN）
- 重构优化（REFACTOR）
- 确保覆盖率 ≥ 80%

### 3. 代码审查

- 使用 **code-reviewer** 代理
- 写完代码后立即审查
- 修复 CRITICAL 和 HIGH 级别问题
- 尽量修复 MEDIUM 级别问题

### 4. 提交推送

- 详细的提交信息
- 遵循约定式提交格式
- PR 需要包含完整的变更说明

## PR 工作流

创建 PR 时：

1. 分析完整的提交历史（不只是最新一次提交）
2. 使用 `git diff [base-branch]...HEAD` 查看全量变更
3. 编写完整的 PR 摘要
4. 包含测试计划
5. 新分支推送时使用 `-u` 标志
